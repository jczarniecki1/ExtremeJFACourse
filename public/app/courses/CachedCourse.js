// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('app').factory('CachedCourse', function(CourseModel, $q) {
    var courseList;
    courseList = void 0;
    return {
      query: function() {
        return courseList || (courseList = CourseModel.query());
      },
      remove: function(id) {
        var $d;
        $d = $q.defer();
        courseList.$promise.then(function(collection) {
          var course, _i, _len;
          for (_i = 0, _len = collection.length; _i < _len; _i++) {
            course = collection[_i];
            if (course._id === id) {
              course.$remove({
                id: id
              }).then(function() {
                return collection.remove(course) && $d.resolve();
              }, function(response) {
                return $d.reject(response.data.reason);
              });
              return;
            }
          }
          return $d.reject("Course not found");
        });
        return $d.promise;
      }
    };
  });

}).call(this);

//# sourceMappingURL=CachedCourse.map
