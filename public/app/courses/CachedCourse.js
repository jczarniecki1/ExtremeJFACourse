// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('app').factory('CachedCourse', function(CourseModel, $q) {
    var CachedCourse, courseList;
    courseList = void 0;
    CachedCourse = (function() {
      function CachedCourse() {}

      CachedCourse.prototype.query = function() {
        return courseList || (courseList = CourseModel.query());
      };

      CachedCourse.prototype.remove = function(id) {
        var $d;
        $d = $q.defer();
        courseList.$promise.then(function(collection) {
          return collection.findById(id, function(course) {
            return course.$remove({
              id: id
            }).then(function() {
              return collection.remove(course) && $d.resolve();
            }, function(response) {
              return $d.reject(response.data.reason);
            });
          }, function() {
            return $d.reject("Course not found");
          });
        });
        return $d.promise;
      };

      return CachedCourse;

    })();
    return new CachedCourse();
  });

}).call(this);

//# sourceMappingURL=CachedCourse.map
