// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('app').controller('profileController', function($scope, mvAuth, mvIdentity, mvNotifier) {
    var u;
    u = mvIdentity.currentUser;
    $scope.email = u.username;
    $scope.fname = u.firstName;
    $scope.lname = u.lastName;
    return $scope.update = function() {
      var newPassword, newUserData;
      newUserData = {
        username: $scope.email,
        firstName: $scope.fname,
        lastName: $scope.lname
      };
      newPassword = $scope.password;
      if (newPassword && newPassword.length > 0) {
        newUserData.password = newPassword;
      }
      return mvAuth.updateCurrentUser(newUserData).then(function() {
        return mvNotifier.notify('Your user account has been updated');
      }, function(reason) {
        return mvNotifier.error(reason);
      });
    };
  });

}).call(this);

//# sourceMappingURL=profileController.map
