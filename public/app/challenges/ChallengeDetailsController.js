// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('app').controller('ChallengeDetailsController', function($scope, CachedChallenge, CachedCourse, $routeParams, ControlsProvider, IdentityService, $location) {
    var courseId;
    $scope.identity = IdentityService;
    courseId = $routeParams.courseId;
    $scope.courseId = courseId;
    CachedChallenge.query({
      courseId: courseId
    }).$promise.then(function(collection) {
      $scope.challengeIndex = collection.findById($routeParams.challengeId, function(challenge) {
        var controller;
        $scope.challenge = challenge;
        angular.extend(challenge.config, {
          title: challenge.title,
          instruction: challenge.description
        });
        controller = ControlsProvider.findById(challenge.control);
        return controller.init($('.challenge-body'), challenge.config);
      });
      return $scope.skip = function() {
        var nextChallenge, nextIndex;
        nextIndex = $scope.challengeIndex + 1;
        if (collection.length > nextIndex) {
          nextChallenge = collection[nextIndex];
          return $location.path("/courses/" + courseId + "/challenge/" + nextChallenge._id);
        }
      };
    });
    return CachedCourse.findById(courseId, function(course) {
      return $scope.course = course;
    });
  });

}).call(this);

//# sourceMappingURL=ChallengeDetailsController.map
