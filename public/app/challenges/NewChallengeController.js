// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('app').controller('NewChallengeController', function($scope, ChallengeEditor, $location, $routeParams, NotifierService, ControlsProvider) {
    var courseId;
    courseId = $routeParams.courseId;
    $scope.formTitle = "New Challenge";
    $scope.levels = ["basic", "advanced", "expert"];
    $scope.controls = ControlsProvider.getControls();
    return $scope.submit = function() {
      var newChallengeData, parsedConfig;
      try {
        parsedConfig = JSON.parse($scope.config);
      } catch (_error) {
        return NotifierService.error('Cannot parse configuration to JSON');
      }
      newChallengeData = {
        title: $scope.title,
        description: $scope.description,
        level: $scope.level,
        config: parsedConfig,
        control: $scope.control,
        courseId: courseId
      };
      return ChallengeEditor.createChallenge(newChallengeData).then(function(challenge) {
        NotifierService.notify('New challenge created successfully');
        return $location.path("/courses/" + courseId + "/challenge/" + challenge._id);
      }, NotifierService.error);
    };
  });

}).call(this);

//# sourceMappingURL=NewChallengeController.map
